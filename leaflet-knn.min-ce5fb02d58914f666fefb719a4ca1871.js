!function(t){if("function"==typeof bootstrap)bootstrap("leafletknn",t);else if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeLeafletKnn=t}else"undefined"!=typeof window?window.leafletKnn=t():global.leafletKnn=t()}(function(){return function t(n,e,r){function o(f,u){if(!e[f]){if(!n[f]){var a="function"==typeof require&&require;if(!u&&a)return a(f,!0);if(i)return i(f,!0);throw new Error("Cannot find module '"+f+"'")}var l=e[f]={exports:{}};n[f][0].call(l.exports,function(t){var e=n[f][1][t];return o(e||t)},l,l.exports,t,n,e,r)}return e[f].exports}for(var i="function"==typeof require&&require,f=0;f<r.length;f++)o(r[f]);return o}({1:[function(t,n){function e(t){for(var n=[],e={},r=0;r<t.length;r++)void 0==e[L.stamp(t[r].layer)]&&(n.push(t[r]),e[L.stamp(t[r].layer)]=!0);return n}function r(t,n){for(var e=[],r=0;r<t.length;r++)e.push({lon:t[r][0],lat:t[r][1],layer:n});return e}function o(t){var n=0,e=0,r=0,o=[];if("object"==typeof t[0]&&"object"==typeof t[0][0]&&"object"==typeof t[0][0][0]){for(;n<t.length;n++)for(;e<t[n].length;e++)for(;r<t[n][e].length;r++)o.push(t[n][e][r]);return o}if("object"==typeof t[0]&&"object"==typeof t[0][0]){for(;n<t.length;n++)for(;e<t[n].length;e++)o.push(t[n][e]);return o}return"object"==typeof t[0]?t:[t]}var i=t("sphere-knn");n.exports=function(t){"use strict";function n(t){f=f.concat(r(o(t.feature.geometry.coordinates),t))}if(!(t instanceof L.GeoJSON))throw new Error("must be L.GeoJSON");var f=[];t.eachLayer(n);var u=i(f);return u.nearest=function(t,n,e){return t instanceof L.LatLng&&(t=[t.lng,t.lat]),u(t[1],t[0],n,e)},u.nearestLayer=function(t,n,r){return t instanceof L.LatLng&&(t=[t.lng,t.lat]),e(u(t[1],t[0],n,r))},u}},{"sphere-knn":2}],2:[function(t,n){var e=t("./lib/spherekd");n.exports=function(t){var n=e.build(t);return function(t,r,o,i){return e.lookup(t,r,n,o,i)}}},{"./lib/spherekd":5}],3:[function(t,n,e){function r(t,n){return t-n}e.search=function(t,n,e){e||(e=r);for(var o,i,f=0,u=n.length-1;u>=f;)if(o=f+u>>>1,0>(i=e(n[o],t)))f=o+1;else{if(!(i>0))return o;u=o-1}return-(f+1)},e.insert=function(t,n,r){var o=e.search(t,n,r);0>o&&(o=-(o+1)),n.splice(o,0,t)}},{}],4:[function(t,n,e){function r(t,n,e,r){this.axis=t,this.split=n,this.left=e,this.right=r}function o(t,n){for(var e,r=Math.min(t.length,n.length),o=0;r--;)e=n[r]-t[r],o+=e*e;return o}function i(t,n){return t.dist-n.dist}function f(t,n){if(0===t.length)return null;if(1===t.length)return t[0];var e=n%t[0].position.length;t.sort(function(t,n){return t.position[e]-n.position[e]});var o=Math.floor(.5*t.length);return++n,new r(e,t[o].position[e],f(t.slice(0,o),n),f(t.slice(o),n))}function u(t){return f(t,0)}function a(t,n,e,f){f>0||(f=Number.POSITIVE_INFINITY);var u=[];if(null===n||0>=e)return u;for(var a,s,c=[n,0];c.length;)if(a=c.pop(),n=c.pop(),!(a>f||u.length===e&&u[u.length-1].dist<a*a)){for(;n instanceof r;)t[n.axis]<n.split?(c.push(n.right,n.split-t[n.axis]),n=n.left):(c.push(n.left,t[n.axis]-n.split),n=n.right);a=o(t,n.position),f*f>=a&&l.insert({object:n,dist:a},u,i),u.length>e&&u.pop()}for(s=u.length;s--;)u[s]=u[s].object;return u}var l=t("./binary");e.build=u,e.lookup=a},{"./binary":3}],5:[function(t,n,e){function r(t,n){t*=a,n*=a;var e=Math.cos(t);return[e*Math.cos(n),Math.sin(t),e*Math.sin(n)]}function o(t){var n,e;t.hasOwnProperty("lat")?n=t.lat:t.hasOwnProperty("latitude")?n=t.latitude:t.hasOwnProperty("location")&&Array.isArray(t.location)&&2===t.location.length&&(n=t.location[0]),t.hasOwnProperty("lon")?e=t.lon:t.hasOwnProperty("longitude")?e=t.longitude:t.hasOwnProperty("lng")?e=t.lng:t.hasOwnProperty("long")?e=t.long:t.hasOwnProperty("location")&&Array.isArray(t.location)&&2===t.location.length&&(e=t.location[1]),this.object=t,this.position=r(n,e)}function i(t){for(var n=t.length,e=new Array(n);n--;)e[n]=new o(t[n]);return u.build(e)}function f(t,n,e,o,i){for(var f=u.lookup(r(t,n),e,o,i>0?2*Math.sin(i*l):void 0),a=f.length;a--;)f[a]=f[a].object;return f}var u=t("./kd"),a=Math.PI/180,l=1/12742018;e.build=i,e.lookup=f},{"./kd":4}]},{},[1])(1)});